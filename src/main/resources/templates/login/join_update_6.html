<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/login/join_1.css">
    <title>이메일로 시작하기</title>
</head>
<body>
<div id="root">
    <main>
        <div class="content-width-560 padding-y-0">
            <div class="EmailValidationForm-module_container__8fd6e">
                <div class="EmailValidationForm-module_headerAndTitle__583ce">
                    <div class="EmailValidationForm-module_header__ac5b4">
                        <header class="Header-module_container__da545">
                            <div class="Header-module_content__31d4e">
                                <div class="Header-module_left__45013">
                                    <button class="StyledComponent-module_container__2d5ce"
                                            aria-label="뒤로 가기"
                                            type="button"
                                            onclick="history.back()">
                                        <svg viewBox="0 0 24 24"
                                             xmlns="http://www.w3.org/2000/svg"
                                             width="24"
                                             class="WithProps-module_icon__d564b"
                                             style="height: 24px; width: 24px;">
                                            <path fill-rule="evenodd"
                                                  clip-rule="evenodd"
                                                  d="M16.0757 2.57573L16.9243 3.42426L8.34851 12L16.9243 20.5757L16.0757 21.4243L6.65146 12L16.0757 2.57573Z"
                                                  fill="#495057">
                                            </path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="Header-module_center__3afb0"></div>
                                <div class="Header-module_right__6c908">
                                    <a class="StyledComponent-module_container__2d5ce"
                                       aria-label="홈으로 가기"
                                       th:href="@{/ev/main}">
                                        <svg viewBox="0 0 24 24"
                                             xmlns="http://www.w3.org/2000/svg"
                                             width="24"
                                             class="WithProps-module_icon__d564b"
                                             style="height: 24px; width: 24px;">
                                            <path d="M21.6 7.67893L12 1.27893L2.40002 7.67893V21H3.60002V8.32115L12 2.72115L20.4 8.32115V21H21.6V7.67893Z" fill="#495057"></path>
                                            <path d="M15.6 21V12.4H8.40002V21H9.60002V13.6H14.4V21H15.6Z" fill="#495057"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </header>
                    </div>
                    <div class="EmailValidationForm-module_title__31f35">
                        <span>이메일로 시작하기</span>
                    </div>
                </div>

                <div class="EmailValidationForm-module_changeEmail__6c1fe">
                    <!--  Form 액션 수정 -->
                    <form class="EmailValidationForm-module_emailForm__a4d0f"
                          th:action="@{/ev/company/loginLv3}"
                          method="post"
                          id="emailForm">
                        <div class="EmailValidationForm-module_emailGroup__1b759">
                            <div class="EmailValidationForm-module_emailInputWrapper__970d8">
                                <div class="EmailValidationForm-module_inputFields__2aa2d">
                                    <div class="TextField-module_textField__404b4 TextField-module_lg__11d56 EmailValidationForm-module_emailTextField__afe05">
                                        <label for="username">
                                            <span><span>이메일</span></span>
                                            <span class="TextField-module_isRequired__294b9">*</span>
                                        </label>
                                        <div class="TextField-module_field__4d1fc TextField-module_noStartText TextField-module_noEndTex">
                                            <!--   name 속성 추가 -->
                                            <input autocomplete="username"
                                                   inputmode="email"
                                                   placeholder="이메일 입력"
                                                   name="memberEmail"
                                                   id="username"
                                                   type="email"
                                                   class="Input-module_input__210a1 Input-module_lg__592e9"
                                                   aria-invalid="false"
                                                   required>

                                            <button aria-label="지우기"
                                                    class="Button-module_button__d78c2 Button-module_lg__53dd9 Button-module_iconOnly__0a115 iconButton TextField-module_endIcon__aab7d TextField-module_clearIcon__c58f8"
                                                    type="button">
                                                    <span><span>
                                                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="WithProps-module_icon__d564b">
                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M1.40002 12C1.40002 6.14581 6.14581 1.40002 12 1.40002C17.8542 1.40002 22.6 6.14581 22.6 12C22.6 17.8542 17.8542 22.6 12 22.6C6.14581 22.6 1.40002 17.8542 1.40002 12ZM7.3331 15.8184L11.1515 12.0001L7.3331 8.18167L8.18162 7.33315L12 11.1515L15.8184 7.33315L16.6669 8.18167L12.8485 12.0001L16.6669 15.8184L15.8184 16.667L12 12.8486L8.18162 16.667L7.3331 15.8184Z" fill="#495057"></path>
                                                        </svg>
                                                    </span></span>
                                            </button>
                                        </div>
                                    </div>
                                    <p class="EmailValidationForm-module_error__cbcb7" style="display: none;">올바른 이메일 주소를 입력해 주세요.</p>
                                </div>

                                <!--  버튼 수정 -->
                                <button class="Button-module_button__d78c2
                                                    Button-module_mint__1c1d6
                                                    Button-module_contained__ecf2a
                                                    Button-module_lg__53dd9
                                                    Button-module_block__d6eff
                                                    Button-module_disabled__2ebf2"
                                        disabled
                                        type="submit"
                                        id="nextButton">
                                    <span><span>다음</span></span>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="FindIDPasswordSection-module_signUpMessage__f968d">
                    <div>
                        <a data-test-id="findPasswordLink"
                           href="#">아이디/비밀번호 찾기</a>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
</body>

<script type="text/javascript" src="/js/login/join.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const emailInput = document.getElementById('username');
        const errorMessage = document.querySelector('.EmailValidationForm-module_error__cbcb7');
        const nextButton = document.getElementById('nextButton');

        // 이메일 입력 검증
        emailInput.addEventListener('input', () => {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (emailRegex.test(emailInput.value)) {
                // 유효한 이메일
                nextButton.disabled = false;
                nextButton.classList.remove('Button-module_disabled__2ebf2');
                errorMessage.style.display = 'none';
            } else {
                // 유효하지 않은 이메일
                nextButton.disabled = true;
                nextButton.classList.add('Button-module_disabled__2ebf2');

                if (emailInput.value.length > 0) {
                    errorMessage.style.display = 'block';
                } else {
                    errorMessage.style.display = 'none';
                }
            }
        });

        // 지우기 버튼
        document.addEventListener('click', (e) => {
            const clearBtn = e.target.closest('.TextField-module_clearIcon__c58f8');
            if (!clearBtn) return;

            emailInput.value = '';
            emailInput.focus();
            errorMessage.style.display = 'none';
            nextButton.disabled = true;
            nextButton.classList.add('Button-module_disabled__2ebf2');
        });
    });
</script>

</html>